<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
  <meta charset="UTF-8">
  <title>Reported Posts</title>
  <style>
    .dropdown-orange {
      background-color: orange;
      color: white;
    }
    .large-input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
    }
    .button-container {
      margin-top: 10px;
    }
  </style>
  <!-- Replace link CSS from layout -->
  <th:block th:replace="~{layout :: link-css}"></th:block>
</head>
<body layout:decorate="~{layout}">
<!-- Replace header from layout -->
<th:block th:replace="~{layout :: header}"></th:block>
<main layout:fragment="content">
  <div class="container mt-4">
    <h2>Reported Posts</h2>
    <table class="table">
      <thead>
      <tr>
        <th>Reported By</th>
        <th>Reason</th>
        <th>Post Content</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="report : ${reports}">
        <td th:text="${report.reportedByUser != null ? report.reportedByUser.name : 'Unknown'}"></td>
        <td th:text="${report.reason}"></td>
        <td th:text="${report.userPost.content}"></td>
        <td>
          <form th:action="@{/admin/reports/{id}/resolve(id=${report.id})}" method="post">
            <input type="hidden" name="action" value="approve">
            <button type="submit" class="btn btn-success">Approve</button>
          </form>
          <form th:action="@{/admin/reports/{id}/resolve(id=${report.id})}" method="post">
            <input type="hidden" name="action" value="delete">
            <button type="submit" class="btn btn-danger">Delete</button>
          </form>
          <form th:action="@{/admin/reports/{id}/resolve(id=${report.id})}" method="post">
            <input type="hidden" name="action" value="dismiss">
            <button type="submit" class="btn btn-secondary">Dismiss</button>
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</main>

<!-- Replace footer from layout -->
<th:block th:replace="~{layout :: footer}"></th:block>
</body>
</html>
